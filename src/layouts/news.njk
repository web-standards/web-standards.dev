---
layout: page.njk
---

{% from 'news-card.njk' import newsCard %}
{% from 'cover.njk' import cover %}

{% set coverSizes = '(min-width: 1232px) 570px, (min-width: 1024px) calc(50vw - 3rem), calc(100vw - 2rem)' %}

<div class="news">
	<header class="news__header">
		<h1 class="news__title">
			<a href="{{ page.url }}">
				{{- title -}}
			</a>
		</h1>
		<time class="news__date" datetime="{{ date | dateISO }}">
			{{- date | dateLong -}}
		</time>
	</header>

	{{ cover(
		class='news__cover',
		url=page.url,
		sizes=coverSizes,
		alt=alt
	) }}

	<div class="news__content content">
		{{ content | safe }}
		<p>
			<a href="{{ link }}" target="_blank">
				{{- link | stripURL -}}
			</a>
		</p>
	</div>

	<p class="news__tags">
		Tags:
	{% for tag in tags %}
		<a href="/tags/{{ tag }}/">
			{{- tag -}}
		</a>
		{{- ", " if not loop.last -}}
	{% endfor %}
	</p>
</div>

<aside class="related">
	<h2 class="related__title">On that note</h2>
	<ul class="news-list">
{%- set relatedCount = 0 %}
{%- for item in collections.news %}
	{%- if item.url != page.url and relatedCount < 6 %}
		{%- set hasCommonTag = false %}
		{%- for tag in tags %}
			{%- if tag in item.data.tags %}
				{%- set hasCommonTag = true %}
			{%- endif %}
		{%- endfor %}
		{%- if hasCommonTag %}
		<li class="news-list__item">
			{{ newsCard(news=item) }}
		</li>
			{%- set relatedCount = relatedCount + 1 %}
		{%- endif %}
	{%- endif %}
{%- endfor %}
	</ul>
</aside>
